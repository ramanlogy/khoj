<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Promote Your Business & Offers for Free | Khojum Nepal</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <meta name="description" content="List your business deals and discounts for free on Khojum.com. Reach thousands of customers in Nepal looking for great offers.">
    <meta name="robots" content="noindex, nofollow"> <!-- Prevent indexing of the submission page -->

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Basic Favicon -->
    <link rel="icon" href="/assets/favicon.ico"> <!-- Adjust path if needed -->

    <style>
        /* --- Variables --- */
        :root {
            --primary-color: #dc143c; /* Khojum Red */
            --secondary-color: #4a5a94; /* Muted Blue/Purple */
            --accent-color: #f9d949;   /* Khojum Yellow */
            --dark-text: #2c3e50;     /* Dark Slate */
            --light-text: #8a95a1;    /* Medium Grey */
            --border-color: #e8edf3;   /* Light Grey Border */
            --success-bg: #d1e7dd;
            --success-text: #0f5132;
            --error-bg: #f8d7da;
            --error-text: #842029;
            --body-bg: #f8faff;
            --form-bg: #ffffff;
        }

        /* --- Base & Reset --- */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Poppins', sans-serif;
            line-height: 1.7;
            background-color: var(--body-bg);
            color: var(--dark-text);
            font-size: 16px;
        }
        img { max-width: 100%; display: block; }
        a { color: var(--secondary-color); text-decoration: none; }
        a:hover { text-decoration: underline; }
        input, select, textarea, button { font-family: inherit; font-size: inherit; }

        /* --- Layout --- */
        .container {
            max-width: 1100px; /* Slightly wider */
            margin: 0 auto;
            padding: 0 20px;
        }

        /* --- Header --- */
        .page-header {
            background-color: #ffffff; /* White header */
            box-shadow: 0 2px 8px rgba(0,0,0,0.07);
            padding: 15px 0;
            border-bottom: 3px solid var(--primary-color);
        }
        .page-header .container { display: flex; justify-content: space-between; align-items: center; }
        .logo a { text-decoration: none; color: var(--dark-text); }
        .logo h1 { font-size: 1.9rem; font-weight: 700; }
        .logo span { color: var(--primary-color); } /* Khojum Red span */
        .header-tagline h2 { font-size: 1.1rem; font-weight: 500; color: var(--light-text); text-align: right; }

        /* --- Main Content Area --- */
        .promote-page-content { padding: 50px 0; }
        .promote-intro {
            text-align: center;
            margin-bottom: 40px;
            max-width: 750px;
            margin-left: auto;
            margin-right: auto;
        }
        .promote-intro h1 {
            font-size: 2.4rem; /* Larger title */
            color: var(--primary-color);
            margin-bottom: 15px;
            font-weight: 700;
        }
        .promote-intro .subtitle {
            font-size: 1.15rem;
            color: var(--dark-text);
            margin-bottom: 20px;
        }
        .promote-intro .benefits {
             font-size: 1rem;
             color: var(--light-text);
             font-style: italic;
        }

        /* --- Form Styling --- */
        .promote-form-container {
            background-color: var(--form-bg);
            padding: 35px 40px;
            border-radius: 10px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
            max-width: 850px;
            margin: 0 auto;
        }
        .form-section {
            margin-bottom: 30px;
            padding-bottom: 25px;
            border-bottom: 1px solid var(--border-color);
        }
        .form-section:last-of-type { border-bottom: none; margin-bottom: 0; padding-bottom: 10px;} /* Adjust last section */

        .section-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--secondary-color);
            margin-bottom: 20px;
            padding-bottom: 5px;
            border-bottom: 2px solid var(--secondary-color);
            display: inline-block;
        }
        .form-row { display: flex; flex-wrap: wrap; gap: 25px; margin-bottom: 18px; }
        .form-group { flex: 1 1 300px; /* Allow wrapping */ } /* Adjust flex-basis */

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 0.9rem;
            color: var(--dark-text);
        }
        .form-group label i { margin-right: 8px; color: var(--secondary-color); width: 18px; text-align: center; }
        .required:after { content: " *"; color: var(--primary-color); font-weight: bold;}

        .form-group input[type="text"],
        .form-group input[type="email"],
        .form-group input[type="url"],
        .form-group input[type="tel"],
        .form-group input[type="number"],
        .form-group input[type="date"],
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 0.95rem;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
            background-color: #fdfdff;
        }
         .form-group input[type="file"] {
             padding: 8px; /* Different padding for file input */
             font-size: 0.9rem;
         }
        .form-group textarea { resize: vertical; min-height: 100px; }
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px color-mix(in srgb, var(--secondary-color) 15%, transparent);
        }
         /* Style for invalid required fields */
         .form-group input:required:invalid,
         .form-group select:required:invalid,
         .form-group textarea:required:invalid {
             border-color: var(--primary-color); /* Indicate invalid */
         }
         .form-group input[type="file"] { /* File inputs might look different */ }

        .form-help { font-size: 0.8rem; color: var(--light-text); margin-top: 6px; }

        /* Terms Checkbox */
        .terms-group { display: flex; align-items: flex-start; gap: 10px; margin: 20px 0; }
        .terms-group input[type="checkbox"] { margin-top: 5px; width: 18px; height: 18px; flex-shrink: 0; accent-color: var(--primary-color); }
        .terms-group label { font-size: 0.9rem; font-weight: 400; color: var(--dark-text); }
        .terms-group a { color: var(--secondary-color); font-weight: 500; text-decoration: underline; }
        .terms-group a:hover { color: var(--primary-color); }

        /* Status Message */
        #form-status-message {
            margin: 20px 0 10px 0;
            padding: 12px 15px;
            border-radius: 6px;
            font-weight: 500;
            text-align: center;
            display: none; /* Hidden by default */
            border: 1px solid transparent;
        }
        #form-status-message.success { background-color: var(--success-bg); color: var(--success-text); border-color: color-mix(in srgb, var(--success-text) 40%, transparent); }
        #form-status-message.error { background-color: var(--error-bg); color: var(--error-text); border-color: color-mix(in srgb, var(--error-text) 40%, transparent); }

        /* Submit Button */
        .form-submit { text-align: center; margin-top: 25px; }
        .submit-button {
            background-color: var(--primary-color); /* Use primary color */
            color: white;
            padding: 14px 35px;
            border: none;
            border-radius: 6px;
            font-size: 1.05rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s, box-shadow 0.3s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .submit-button:hover:not(:disabled) {
            background-color: color-mix(in srgb, var(--primary-color) 85%, black);
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
        }
        .submit-button:disabled {
             background-color: #cccccc;
             cursor: not-allowed;
             opacity: 0.7;
        }

        /* --- Footer --- */
        footer { background-color: var(--dark-text); color: #eee; padding: 30px 0; text-align: center; margin-top: 50px; }
        .logo-small { font-family: 'Poppins', sans-serif; font-size: 1.6rem; font-weight: 700; margin-bottom: 10px; display: inline-block; color: white; }
        .logo-small span { color: var(--accent-color); }
        footer p { margin-bottom: 8px; font-size: 0.9rem; color: #ccc; }
        .support-message { margin: 15px 0; font-size: 0.9rem; }
        .twitter-link { color: #1DA1F2; text-decoration: none; }
        .twitter-link:hover { color: #ffffff; }
        .copyright { font-size: 0.85rem; margin-top: 15px; color: #aaa; }

        /* --- Responsive --- */
        @media (max-width: 768px) {
            body { font-size: 15px; }
            .container { padding: 0 15px; }
            .page-header .container { flex-direction: column; gap: 10px; }
            .header-tagline h2 { text-align: center; font-size: 1rem;}
            .promote-page-content { padding: 30px 0; }
            .promote-intro h1 { font-size: 1.9rem; }
            .promote-intro .subtitle { font-size: 1.05rem; }
            .promote-form-container { padding: 25px 20px; }
            .section-title { font-size: 1.2rem; }
            .form-row { flex-direction: column; gap: 18px; margin-bottom: 18px; }
            .form-group { min-width: 100%; }
            .submit-button { padding: 12px 30px; font-size: 1rem; }
        }
         @media (max-width: 480px) {
            .promote-intro h1 { font-size: 1.6rem; }
            .promote-intro .subtitle { font-size: 1rem; }
            .promote-form-container { padding: 20px 15px; }
         }

    </style>
</head>
<body>
    <!-- Header -->
    <header class="page-header">
        <div class="container">
            <div class="logo">
                <a href="/"><h1><span>खो</span>जुम</h1></a>
            </div>
            <div class="header-tagline">
                <h2>More than 1,300 tourists use our site regularly.</h2>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container promote-page-content">
        <div class="promote-intro">
            <h1>Promote Your Business & Offers For Free!</h1>
            <p class="subtitle">Reach thousands of shoppers across Nepal actively looking for great deals. Submit your offer details below.</p>
            <p class="benefits">List and Grow your business with our loyal tourists.</p>
        </div>

        <!-- Form Container -->
        <div class="promote-form-container">
            <form id="promote-form" action="/api/quick-submit" method="POST"/form-data" > <!-- Removed action/method -->

                <!-- Business Info Section -->
                <div class="form-section">
                    <h3 class="section-title">1. Business Information</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="business-name" class="required"><i class="fas fa-store"></i>Business Name</label>
                            <input type="text" id="business-name" name="businessName" required placeholder="e.g., Himalayan Java Coffee">
                        </div>
                        <div class="form-group">
                            <label for="business-category" class="required"><i class="fas fa-tags"></i>Category</label>
                            <select id="business-category" name="businessCategory" required>
                                <option value="" disabled selected>Select Category...</option>
                                <option value="restaurant">Restaurant / Cafe</option>
                                <option value="fashion">Fashion & Apparel</option>
                                <option value="electronics">Electronics Store</option>
                                <option value="shopping">General Shopping / Retail</option>
                                <option value="travel">Travel & Tours</option>
                                <option value="health_beauty">Health & Beauty</option>
                                <option value="entertainment">Entertainment</option>
                                <option value="services">Services (Salon, Repair, etc.)</option>
                                <option value="groceries">Groceries / Supermarket</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="business-address" class="required"><i class="fas fa-map-marker-alt"></i>Full Address (Inc. City)</label>
                            <input type="text" id="business-address" name="businessAddress" required placeholder="e.g., Tridevi Marg, Thamel, Kathmandu">
                        </div>
                        <div class="form-group">
                            <label for="business-phone" class="required"><i class="fas fa-phone"></i>Contact Phone</label>
                            <input type="tel" id="business-phone" name="businessPhone" required placeholder="e.g., 01-44XXXXX or 98XXXXXXXX">
                        </div>
                    </div>
                    <div class="form-row">
                         <div class="form-group">
                            <label for="business-website"><i class="fas fa-link"></i>Website / Facebook Page</label>
                            <input type="url" id="business-website" name="businessWebsite" placeholder="https://www.yourbusiness.com or https://facebook.com/yourpage">
                        </div>
                        <div class="form-group">
                            <label for="business-logo"><i class="fas fa-image"></i>Business Logo</label>
                            <input type="file" id="business-logo" name="businessLogo" accept="image/png, image/jpeg, image/webp">
                            <p class="form-help">Optional. Square format best (max 1MB).</p>
                        </div>
                    </div>
                </div>

                <!-- Offer Details Section -->
                <div class="form-section">
                    <h3 class="section-title">2. Offer Details</h3>
                    <div class="form-group">
                        <label for="deal-title" class="required"><i class="fas fa-bullhorn"></i>Offer Headline</label>
                        <input type="text" id="deal-title" name="dealTitle" required placeholder="e.g., 20% Off Entire Menu, Buy 1 Pizza Get 1 Free">
                    </div>
                    <div class="form-group">
                        <label for="deal-description" class="required"><i class="fas fa-info-circle"></i>Description & Terms</label>
                        <textarea id="deal-description" name="dealDescription" required placeholder="Describe the offer clearly. Include any important conditions (e.g., valid days, minimum spend, exclusions)."></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="deal-discount-percentage"><i class="fas fa-percent"></i>Discount Percentage (Optional)</label>
                            <input type="number" id="deal-discount-percentage" name="dealDiscountPercentage" min="1" max="100" placeholder="e.g., 25 (Enter numbers only)">
                            <p class="form-help">Enter only if it's a percentage discount.</p>
                        </div>
                        <div class="form-group">
                            <label for="deal-expiry-date" class="required"><i class="fas fa-calendar-times"></i>Offer Expiry Date</label>
                            <input type="date" id="deal-expiry-date" name="dealExpiryDate" required>
                        </div>
                    </div>
                     <div class="form-row">
                          <div class="form-group">
                             <label for="coupon-code"><i class="fas fa-ticket-alt"></i>Coupon Code (Optional)</label>
                             <input type="text" id="coupon-code" name="couponCode" placeholder="e.g., KHOJUM20">
                             <p class="form-help">Enter if a specific code is needed to redeem the offer.</p>
                         </div>
                        <div class="form-group">
                            <label for="deal-image"><i class="fas fa-camera"></i>Offer Image</label>
                            <input type="file" id="deal-image" name="dealImage" accept="image/png, image/jpeg, image/webp">
                            <p class="form-help">Optional. Helps your deal stand out (max 2MB).</p>
                        </div>
                    </div>
                </div>

                <!-- Contact Info Section (Optional but recommended) -->
                <div class="form-section">
                    <h3 class="section-title">3. Your Contact Info (For Verification)</h3>
                     <p class="form-help" style="margin-bottom: 15px;">This information is for our team only and will NOT be published with the deal.</p>
                     <div class="form-row">
                         <div class="form-group">
                            <label for="contact-name" class="required"><i class="fas fa-user"></i>Your Name</label>
                            <input type="text" id="contact-name" name="contactName" required placeholder="Your Full Name">
                        </div>
                        <div class="form-group">
                            <label for="contact-email" class="required"><i class="fas fa-at"></i>Your Email</label>
                            <input type="email" id="contact-email" name="contactEmail" required placeholder="We'll send confirmation here">
                        </div>
                    </div>
                 </div>


                <!-- Terms and Submit -->
                <div class="terms-group">
                    <input type="checkbox" id="terms-agree" name="termsAgree" required>
                    <label for="terms-agree">I confirm I am authorized to submit this listing and agree to Khojum's <a href="/terms" target="_blank">Listing Terms</a>.</label> <!-- Link to your terms page -->
                </div>

                 <!-- Status Message Area -->
                 <div id="form-status-message"></div>

                <div class="form-submit">
                    <button type="submit" id="submit-listing-button" class="submit-button">Submit Listing</button>
                </div>

            </form>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="logo-small"><span>खो</span>जुम</div>
            <p>Your partner in reaching savvy shoppers across Nepal.</p>
            <p class="copyright">© <span id="current-year"></span> Khojum.com</p>
        </div>
    </footer>

    <!-- JavaScript for Form Submission -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Set copyright year
            const yearSpan = document.getElementById('current-year');
            if(yearSpan) yearSpan.textContent = new Date().getFullYear();

            // Form Submission Logic
            const promoteForm = document.getElementById('promote-form');
            const submitButton = document.getElementById('submit-listing-button');
            const formStatusMessage = document.getElementById('form-status-message');
            const successPageUrl = '/thank-you-listing.html'; // *** DEFINE YOUR SUCCESS PAGE URL ***

            if (promoteForm && submitButton && formStatusMessage) {
                promoteForm.addEventListener('submit', async (event) => {
                    event.preventDefault();

                    let isValid = true;
                    promoteForm.querySelectorAll('[required]').forEach(field => {
                         field.style.borderColor = ''; // Reset border
                          // Check value for most inputs, checked for checkbox
                         const isInvalid = (field.type === 'checkbox' && !field.checked) || (!field.value);
                         // Special check for select default value
                         const isInvalidSelect = (field.tagName === 'SELECT' && field.value === '');

                         if (isInvalid || isInvalidSelect) {
                             isValid = false;
                             field.style.borderColor = 'var(--primary-color, #dc143c)';
                             // Optionally scroll to the first invalid field
                             // if (isValid) { // Only scroll to the first one
                             //      field.focus();
                             //      field.scrollIntoView({ behavior: 'smooth', block: 'center' });
                             // }
                         }
                    });

                    if (!isValid) {
                         formStatusMessage.textContent = 'Please fill in all required fields marked with *.';
                         formStatusMessage.className = 'error';
                         formStatusMessage.style.display = 'block';
                         window.scrollTo({ top: formStatusMessage.offsetTop - 100, behavior: 'smooth'}); // Scroll to message
                         return;
                    }

                    // --- AJAX Submission ---
                    submitButton.disabled = true;
                    submitButton.textContent = 'Submitting...';
                    formStatusMessage.textContent = '';
                    formStatusMessage.style.display = 'none';
                    formStatusMessage.className = '';

                    const formData = new FormData(promoteForm);
                    const url = '/api/submit-listing'; // Your backend API endpoint
                    const method = 'POST';

                    try {
                        const response = await fetch(url, { method: method, body: formData });

                        if (response.ok) {
                            console.log('Form submitted successfully via Fetch!');
                            formStatusMessage.textContent = 'Thank you! Your listing has been submitted for review. Redirecting...';
                            formStatusMessage.className = 'success';
                            formStatusMessage.style.display = 'block';
                            window.scrollTo({ top: formStatusMessage.offsetTop - 100, behavior: 'smooth'});
                            promoteForm.reset();

                            setTimeout(() => { window.location.href = successPageUrl; }, 3000); // Redirect after 3 seconds

                        } else {
                            console.error('Form submission failed (API Error):', response.status, response.statusText);
                            let errorMessage = `Submission failed (Error ${response.status}).`;
                            try { const errorData = await response.json(); errorMessage = errorData.message || errorData.error || errorMessage; } catch { /* Ignore non-JSON */ }
                            formStatusMessage.textContent = errorMessage + " Please check your details and try again.";
                            formStatusMessage.className = 'error';
                            formStatusMessage.style.display = 'block';
                            window.scrollTo({ top: formStatusMessage.offsetTop - 100, behavior: 'smooth'});
                            submitButton.disabled = false;
                            submitButton.textContent = 'Submit My Listing for Review';
                        }

                    } catch (error) {
                        console.error('Error submitting form (Network/JS Error):', error);
                        formStatusMessage.textContent = 'A network error occurred. Please check your connection and try again.';
                        formStatusMessage.className = 'error';
                        formStatusMessage.style.display = 'block';
                         window.scrollTo({ top: formStatusMessage.offsetTop - 100, behavior: 'smooth'});
                        submitButton.disabled = false;
                        submitButton.textContent = 'Submit My Listing for Review';
                    }
                });
            } else {
                 console.error("Could not find required form elements (#promote-form, #submit-listing-button, #form-status-message). Submission script inactive.");
            }
        });
    </script>
</body>
</html>
